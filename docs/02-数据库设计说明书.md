# 企业ERP管理系统 - 数据库设计说明书

## 文档信息

| 项目名称 | 企业ERP管理系统 |
|---------|----------------|
| 文档版本 | v1.0 |
| 编写日期 | 2025-10-19 |
| 数据库 | MySQL 8.0+ |

---

## 目录

1. [数据库设计原则](#1-数据库设计原则)
2. [基础数据模块](#2-基础数据模块)
3. [库存管理模块](#3-库存管理模块)
4. [销售管理模块](#4-销售管理模块)
5. [采购管理模块](#5-采购管理模块)
6. [生产管理模块](#6-生产管理模块)
7. [财务管理模块](#7-财务管理模块)
8. [人力资源模块](#8-人力资源模块)
9. [物流管理模块](#9-物流管理模块)
10. [索引设计](#10-索引设计)

---

## 1. 数据库设计原则

### 1.1 命名规范

- **表名**：小写字母，下划线分隔，模块前缀_表名 (如: `foundation_department`)
- **字段名**：小写字母，下划线分隔 (如: `created_at`)
- **主键**：统一使用 `id` 作为主键名
- **外键**：关联表名_id (如: `department_id`)
- **时间字段**：创建时间 `created_at`，更新时间 `updated_at`

### 1.2 字段规范

- **主键**：BIGINT UNSIGNED AUTO_INCREMENT
- **外键**：BIGINT UNSIGNED
- **状态字段**：TINYINT (使用枚举值)
- **金额字段**：DECIMAL(18, 2)
- **数量字段**：DECIMAL(18, 4)
- **时间字段**：DATETIME
- **软删除**：`is_deleted` BOOLEAN DEFAULT 0

### 1.3 公共字段

每个表都包含以下公共字段：

```sql
id BIGINT UNSIGNED AUTO_INCREMENT PRIMARY KEY COMMENT '主键ID',
created_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
updated_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',
created_by BIGINT UNSIGNED COMMENT '创建人ID',
updated_by BIGINT UNSIGNED COMMENT '更新人ID',
is_deleted BOOLEAN DEFAULT 0 COMMENT '是否删除：0-否，1-是',
remark VARCHAR(500) COMMENT '备注'
```

---

## 2. 基础数据模块 (Foundation)

### 2.1 部门表 (foundation_department)

```sql
CREATE TABLE foundation_department (
    id BIGINT UNSIGNED AUTO_INCREMENT PRIMARY KEY COMMENT '部门ID',
    parent_id BIGINT UNSIGNED DEFAULT 0 COMMENT '父部门ID',
    ancestors VARCHAR(500) COMMENT '祖级列表',
    dept_code VARCHAR(50) NOT NULL UNIQUE COMMENT '部门编码',
    dept_name VARCHAR(100) NOT NULL COMMENT '部门名称',
    dept_type TINYINT DEFAULT 1 COMMENT '部门类型：1-公司，2-部门，3-小组',
    leader_id BIGINT UNSIGNED COMMENT '负责人ID',
    phone VARCHAR(20) COMMENT '联系电话',
    email VARCHAR(100) COMMENT '邮箱',
    sort_order INT DEFAULT 0 COMMENT '显示顺序',
    status TINYINT DEFAULT 1 COMMENT '状态：1-正常，0-停用',
    created_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
    updated_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',
    created_by BIGINT UNSIGNED COMMENT '创建人',
    updated_by BIGINT UNSIGNED COMMENT '更新人',
    is_deleted BOOLEAN DEFAULT 0 COMMENT '是否删除',
    remark VARCHAR(500) COMMENT '备注',
    INDEX idx_parent_id (parent_id),
    INDEX idx_dept_code (dept_code)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='部门表';
```

### 2.2 岗位表 (foundation_position)

```sql
CREATE TABLE foundation_position (
    id BIGINT UNSIGNED AUTO_INCREMENT PRIMARY KEY COMMENT '岗位ID',
    position_code VARCHAR(50) NOT NULL UNIQUE COMMENT '岗位编码',
    position_name VARCHAR(100) NOT NULL COMMENT '岗位名称',
    position_level TINYINT COMMENT '岗位级别：1-高层，2-中层，3-基层',
    dept_id BIGINT UNSIGNED COMMENT '所属部门ID',
    sort_order INT DEFAULT 0 COMMENT '显示顺序',
    status TINYINT DEFAULT 1 COMMENT '状态：1-正常，0-停用',
    created_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    updated_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    created_by BIGINT UNSIGNED,
    updated_by BIGINT UNSIGNED,
    is_deleted BOOLEAN DEFAULT 0,
    remark VARCHAR(500),
    INDEX idx_dept_id (dept_id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='岗位表';
```

### 2.3 用户表 (foundation_user)

```sql
CREATE TABLE foundation_user (
    id BIGINT UNSIGNED AUTO_INCREMENT PRIMARY KEY COMMENT '用户ID',
    username VARCHAR(50) NOT NULL UNIQUE COMMENT '用户名',
    password VARCHAR(255) NOT NULL COMMENT '密码',
    real_name VARCHAR(50) COMMENT '真实姓名',
    nickname VARCHAR(50) COMMENT '昵称',
    avatar VARCHAR(500) COMMENT '头像URL',
    email VARCHAR(100) UNIQUE COMMENT '邮箱',
    phone VARCHAR(20) UNIQUE COMMENT '手机号',
    gender TINYINT DEFAULT 0 COMMENT '性别：0-未知，1-男，2-女',
    dept_id BIGINT UNSIGNED COMMENT '部门ID',
    position_id BIGINT UNSIGNED COMMENT '岗位ID',
    status TINYINT DEFAULT 1 COMMENT '状态：1-正常，0-停用',
    last_login_at DATETIME COMMENT '最后登录时间',
    last_login_ip VARCHAR(50) COMMENT '最后登录IP',
    created_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    updated_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    created_by BIGINT UNSIGNED,
    updated_by BIGINT UNSIGNED,
    is_deleted BOOLEAN DEFAULT 0,
    remark VARCHAR(500),
    INDEX idx_username (username),
    INDEX idx_dept_id (dept_id),
    INDEX idx_phone (phone)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='用户表';
```

### 2.4 角色表 (foundation_role)

```sql
CREATE TABLE foundation_role (
    id BIGINT UNSIGNED AUTO_INCREMENT PRIMARY KEY COMMENT '角色ID',
    role_code VARCHAR(50) NOT NULL UNIQUE COMMENT '角色编码',
    role_name VARCHAR(100) NOT NULL COMMENT '角色名称',
    role_type TINYINT DEFAULT 1 COMMENT '角色类型：1-系统角色，2-自定义角色',
    data_scope TINYINT DEFAULT 1 COMMENT '数据范围：1-全部，2-本部门及以下，3-本部门，4-仅本人',
    sort_order INT DEFAULT 0 COMMENT '显示顺序',
    status TINYINT DEFAULT 1 COMMENT '状态：1-正常，0-停用',
    created_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    updated_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    created_by BIGINT UNSIGNED,
    updated_by BIGINT UNSIGNED,
    is_deleted BOOLEAN DEFAULT 0,
    remark VARCHAR(500),
    INDEX idx_role_code (role_code)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='角色表';
```

### 2.5 用户角色关联表 (foundation_user_role)

```sql
CREATE TABLE foundation_user_role (
    id BIGINT UNSIGNED AUTO_INCREMENT PRIMARY KEY COMMENT 'ID',
    user_id BIGINT UNSIGNED NOT NULL COMMENT '用户ID',
    role_id BIGINT UNSIGNED NOT NULL COMMENT '角色ID',
    created_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    UNIQUE KEY uk_user_role (user_id, role_id),
    INDEX idx_user_id (user_id),
    INDEX idx_role_id (role_id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='用户角色关联表';
```

### 2.6 菜单表 (foundation_menu)

```sql
CREATE TABLE foundation_menu (
    id BIGINT UNSIGNED AUTO_INCREMENT PRIMARY KEY COMMENT '菜单ID',
    parent_id BIGINT UNSIGNED DEFAULT 0 COMMENT '父菜单ID',
    menu_name VARCHAR(100) NOT NULL COMMENT '菜单名称',
    menu_type TINYINT NOT NULL COMMENT '菜单类型：1-目录，2-菜单，3-按钮',
    path VARCHAR(200) COMMENT '路由地址',
    component VARCHAR(200) COMMENT '组件路径',
    permission VARCHAR(100) COMMENT '权限标识',
    icon VARCHAR(100) COMMENT '菜单图标',
    sort_order INT DEFAULT 0 COMMENT '显示顺序',
    is_external BOOLEAN DEFAULT 0 COMMENT '是否外链',
    is_cached BOOLEAN DEFAULT 0 COMMENT '是否缓存',
    is_visible BOOLEAN DEFAULT 1 COMMENT '是否显示',
    status TINYINT DEFAULT 1 COMMENT '状态：1-正常，0-停用',
    created_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    updated_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    created_by BIGINT UNSIGNED,
    updated_by BIGINT UNSIGNED,
    is_deleted BOOLEAN DEFAULT 0,
    remark VARCHAR(500),
    INDEX idx_parent_id (parent_id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='菜单表';
```

### 2.7 角色菜单关联表 (foundation_role_menu)

```sql
CREATE TABLE foundation_role_menu (
    id BIGINT UNSIGNED AUTO_INCREMENT PRIMARY KEY COMMENT 'ID',
    role_id BIGINT UNSIGNED NOT NULL COMMENT '角色ID',
    menu_id BIGINT UNSIGNED NOT NULL COMMENT '菜单ID',
    created_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    UNIQUE KEY uk_role_menu (role_id, menu_id),
    INDEX idx_role_id (role_id),
    INDEX idx_menu_id (menu_id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='角色菜单关联表';
```

### 2.8 字典类型表 (foundation_dict_type)

```sql
CREATE TABLE foundation_dict_type (
    id BIGINT UNSIGNED AUTO_INCREMENT PRIMARY KEY COMMENT '字典ID',
    dict_code VARCHAR(50) NOT NULL UNIQUE COMMENT '字典编码',
    dict_name VARCHAR(100) NOT NULL COMMENT '字典名称',
    sort_order INT DEFAULT 0 COMMENT '显示顺序',
    status TINYINT DEFAULT 1 COMMENT '状态：1-正常，0-停用',
    created_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    updated_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    created_by BIGINT UNSIGNED,
    updated_by BIGINT UNSIGNED,
    is_deleted BOOLEAN DEFAULT 0,
    remark VARCHAR(500),
    INDEX idx_dict_code (dict_code)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='字典类型表';
```

### 2.9 字典数据表 (foundation_dict_data)

```sql
CREATE TABLE foundation_dict_data (
    id BIGINT UNSIGNED AUTO_INCREMENT PRIMARY KEY COMMENT '字典数据ID',
    dict_type_id BIGINT UNSIGNED NOT NULL COMMENT '字典类型ID',
    dict_label VARCHAR(100) NOT NULL COMMENT '字典标签',
    dict_value VARCHAR(100) NOT NULL COMMENT '字典键值',
    dict_sort INT DEFAULT 0 COMMENT '显示顺序',
    css_class VARCHAR(100) COMMENT '样式属性',
    list_class VARCHAR(100) COMMENT '表格样式',
    is_default BOOLEAN DEFAULT 0 COMMENT '是否默认',
    status TINYINT DEFAULT 1 COMMENT '状态：1-正常，0-停用',
    created_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    updated_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    created_by BIGINT UNSIGNED,
    updated_by BIGINT UNSIGNED,
    is_deleted BOOLEAN DEFAULT 0,
    remark VARCHAR(500),
    INDEX idx_dict_type_id (dict_type_id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='字典数据表';
```

### 2.10 客户表 (foundation_customer)

```sql
CREATE TABLE foundation_customer (
    id BIGINT UNSIGNED AUTO_INCREMENT PRIMARY KEY COMMENT '客户ID',
    customer_code VARCHAR(50) NOT NULL UNIQUE COMMENT '客户编码',
    customer_name VARCHAR(200) NOT NULL COMMENT '客户名称',
    customer_type TINYINT DEFAULT 1 COMMENT '客户类型：1-企业，2-个人',
    customer_level TINYINT DEFAULT 1 COMMENT '客户等级：1-重要，2-普通，3-一般',
    industry VARCHAR(100) COMMENT '所属行业',
    contact_person VARCHAR(50) COMMENT '联系人',
    contact_phone VARCHAR(20) COMMENT '联系电话',
    contact_email VARCHAR(100) COMMENT '联系邮箱',
    address VARCHAR(500) COMMENT '详细地址',
    credit_limit DECIMAL(18,2) DEFAULT 0 COMMENT '信用额度',
    credit_days INT DEFAULT 0 COMMENT '账期天数',
    status TINYINT DEFAULT 1 COMMENT '状态：1-正常，0-停用',
    created_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    updated_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    created_by BIGINT UNSIGNED,
    updated_by BIGINT UNSIGNED,
    is_deleted BOOLEAN DEFAULT 0,
    remark VARCHAR(500),
    INDEX idx_customer_code (customer_code),
    INDEX idx_customer_name (customer_name)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='客户表';
```

### 2.11 供应商表 (foundation_supplier)

```sql
CREATE TABLE foundation_supplier (
    id BIGINT UNSIGNED AUTO_INCREMENT PRIMARY KEY COMMENT '供应商ID',
    supplier_code VARCHAR(50) NOT NULL UNIQUE COMMENT '供应商编码',
    supplier_name VARCHAR(200) NOT NULL COMMENT '供应商名称',
    supplier_type TINYINT DEFAULT 1 COMMENT '供应商类型：1-生产商，2-经销商，3-代理商',
    supplier_level TINYINT DEFAULT 1 COMMENT '供应商等级：1-A级，2-B级，3-C级',
    contact_person VARCHAR(50) COMMENT '联系人',
    contact_phone VARCHAR(20) COMMENT '联系电话',
    contact_email VARCHAR(100) COMMENT '联系邮箱',
    address VARCHAR(500) COMMENT '详细地址',
    payment_days INT DEFAULT 0 COMMENT '付款账期',
    status TINYINT DEFAULT 1 COMMENT '状态：1-正常，0-停用',
    created_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    updated_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    created_by BIGINT UNSIGNED,
    updated_by BIGINT UNSIGNED,
    is_deleted BOOLEAN DEFAULT 0,
    remark VARCHAR(500),
    INDEX idx_supplier_code (supplier_code),
    INDEX idx_supplier_name (supplier_name)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='供应商表';
```

### 2.12 物料分类表 (foundation_material_category)

```sql
CREATE TABLE foundation_material_category (
    id BIGINT UNSIGNED AUTO_INCREMENT PRIMARY KEY COMMENT '分类ID',
    parent_id BIGINT UNSIGNED DEFAULT 0 COMMENT '父分类ID',
    category_code VARCHAR(50) NOT NULL UNIQUE COMMENT '分类编码',
    category_name VARCHAR(100) NOT NULL COMMENT '分类名称',
    sort_order INT DEFAULT 0 COMMENT '显示顺序',
    status TINYINT DEFAULT 1 COMMENT '状态：1-正常，0-停用',
    created_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    updated_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    created_by BIGINT UNSIGNED,
    updated_by BIGINT UNSIGNED,
    is_deleted BOOLEAN DEFAULT 0,
    remark VARCHAR(500),
    INDEX idx_parent_id (parent_id),
    INDEX idx_category_code (category_code)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='物料分类表';
```

### 2.13 物料表 (foundation_material)

```sql
CREATE TABLE foundation_material (
    id BIGINT UNSIGNED AUTO_INCREMENT PRIMARY KEY COMMENT '物料ID',
    material_code VARCHAR(50) NOT NULL UNIQUE COMMENT '物料编码',
    material_name VARCHAR(200) NOT NULL COMMENT '物料名称',
    material_spec VARCHAR(200) COMMENT '物料规格',
    category_id BIGINT UNSIGNED COMMENT '分类ID',
    material_type TINYINT DEFAULT 1 COMMENT '物料类型：1-原材料，2-半成品，3-成品',
    unit VARCHAR(20) COMMENT '基本单位',
    price DECIMAL(18,2) DEFAULT 0 COMMENT '参考价格',
    min_stock DECIMAL(18,4) DEFAULT 0 COMMENT '最小库存',
    max_stock DECIMAL(18,4) DEFAULT 0 COMMENT '最大库存',
    safety_stock DECIMAL(18,4) DEFAULT 0 COMMENT '安全库存',
    barcode VARCHAR(100) COMMENT '条形码',
    status TINYINT DEFAULT 1 COMMENT '状态：1-正常，0-停用',
    created_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    updated_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    created_by BIGINT UNSIGNED,
    updated_by BIGINT UNSIGNED,
    is_deleted BOOLEAN DEFAULT 0,
    remark VARCHAR(500),
    INDEX idx_material_code (material_code),
    INDEX idx_material_name (material_name),
    INDEX idx_category_id (category_id),
    INDEX idx_barcode (barcode)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='物料表';
```

### 2.14 仓库表 (foundation_warehouse)

```sql
CREATE TABLE foundation_warehouse (
    id BIGINT UNSIGNED AUTO_INCREMENT PRIMARY KEY COMMENT '仓库ID',
    warehouse_code VARCHAR(50) NOT NULL UNIQUE COMMENT '仓库编码',
    warehouse_name VARCHAR(100) NOT NULL COMMENT '仓库名称',
    warehouse_type TINYINT DEFAULT 1 COMMENT '仓库类型：1-原料仓，2-成品仓，3-半成品仓',
    manager_id BIGINT UNSIGNED COMMENT '仓管员ID',
    address VARCHAR(500) COMMENT '仓库地址',
    status TINYINT DEFAULT 1 COMMENT '状态：1-正常，0-停用',
    created_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    updated_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    created_by BIGINT UNSIGNED,
    updated_by BIGINT UNSIGNED,
    is_deleted BOOLEAN DEFAULT 0,
    remark VARCHAR(500),
    INDEX idx_warehouse_code (warehouse_code)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='仓库表';
```

---

## 3. 库存管理模块 (Inventory)

### 3.1 库存主表 (inventory_stock)

```sql
CREATE TABLE inventory_stock (
    id BIGINT UNSIGNED AUTO_INCREMENT PRIMARY KEY COMMENT '库存ID',
    warehouse_id BIGINT UNSIGNED NOT NULL COMMENT '仓库ID',
    material_id BIGINT UNSIGNED NOT NULL COMMENT '物料ID',
    batch_no VARCHAR(50) COMMENT '批次号',
    quantity DECIMAL(18,4) DEFAULT 0 COMMENT '库存数量',
    available_qty DECIMAL(18,4) DEFAULT 0 COMMENT '可用数量',
    locked_qty DECIMAL(18,4) DEFAULT 0 COMMENT '锁定数量',
    unit_cost DECIMAL(18,2) DEFAULT 0 COMMENT '单位成本',
    total_amount DECIMAL(18,2) DEFAULT 0 COMMENT '库存金额',
    production_date DATE COMMENT '生产日期',
    expiry_date DATE COMMENT '到期日期',
    created_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    updated_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    UNIQUE KEY uk_warehouse_material_batch (warehouse_id, material_id, batch_no),
    INDEX idx_warehouse_id (warehouse_id),
    INDEX idx_material_id (material_id),
    INDEX idx_batch_no (batch_no)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='库存主表';
```

### 3.2 入库单主表 (inventory_inbound)

```sql
CREATE TABLE inventory_inbound (
    id BIGINT UNSIGNED AUTO_INCREMENT PRIMARY KEY COMMENT '入库单ID',
    inbound_no VARCHAR(50) NOT NULL UNIQUE COMMENT '入库单号',
    inbound_type TINYINT NOT NULL COMMENT '入库类型：1-采购入库，2-生产入库，3-其他入库',
    warehouse_id BIGINT UNSIGNED NOT NULL COMMENT '仓库ID',
    source_doc_no VARCHAR(50) COMMENT '源单号',
    inbound_date DATE NOT NULL COMMENT '入库日期',
    total_qty DECIMAL(18,4) DEFAULT 0 COMMENT '总数量',
    total_amount DECIMAL(18,2) DEFAULT 0 COMMENT '总金额',
    status TINYINT DEFAULT 1 COMMENT '状态：1-草稿，2-待审核，3-已审核，4-已入库',
    audit_by BIGINT UNSIGNED COMMENT '审核人',
    audit_at DATETIME COMMENT '审核时间',
    created_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    updated_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    created_by BIGINT UNSIGNED,
    updated_by BIGINT UNSIGNED,
    is_deleted BOOLEAN DEFAULT 0,
    remark VARCHAR(500),
    INDEX idx_inbound_no (inbound_no),
    INDEX idx_warehouse_id (warehouse_id),
    INDEX idx_inbound_date (inbound_date),
    INDEX idx_status (status)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='入库单主表';
```

### 3.3 入库单明细表 (inventory_inbound_detail)

```sql
CREATE TABLE inventory_inbound_detail (
    id BIGINT UNSIGNED AUTO_INCREMENT PRIMARY KEY COMMENT '明细ID',
    inbound_id BIGINT UNSIGNED NOT NULL COMMENT '入库单ID',
    material_id BIGINT UNSIGNED NOT NULL COMMENT '物料ID',
    batch_no VARCHAR(50) COMMENT '批次号',
    quantity DECIMAL(18,4) NOT NULL COMMENT '入库数量',
    unit_price DECIMAL(18,2) DEFAULT 0 COMMENT '单价',
    amount DECIMAL(18,2) DEFAULT 0 COMMENT '金额',
    production_date DATE COMMENT '生产日期',
    expiry_date DATE COMMENT '到期日期',
    created_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    updated_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    is_deleted BOOLEAN DEFAULT 0,
    remark VARCHAR(500),
    INDEX idx_inbound_id (inbound_id),
    INDEX idx_material_id (material_id),
    INDEX idx_batch_no (batch_no)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='入库单明细表';
```

### 3.4 出库单主表 (inventory_outbound)

```sql
CREATE TABLE inventory_outbound (
    id BIGINT UNSIGNED AUTO_INCREMENT PRIMARY KEY COMMENT '出库单ID',
    outbound_no VARCHAR(50) NOT NULL UNIQUE COMMENT '出库单号',
    outbound_type TINYINT NOT NULL COMMENT '出库类型：1-销售出库，2-生产领料，3-其他出库',
    warehouse_id BIGINT UNSIGNED NOT NULL COMMENT '仓库ID',
    source_doc_no VARCHAR(50) COMMENT '源单号',
    outbound_date DATE NOT NULL COMMENT '出库日期',
    total_qty DECIMAL(18,4) DEFAULT 0 COMMENT '总数量',
    total_amount DECIMAL(18,2) DEFAULT 0 COMMENT '总金额',
    status TINYINT DEFAULT 1 COMMENT '状态：1-草稿，2-待审核，3-已审核，4-已出库',
    audit_by BIGINT UNSIGNED COMMENT '审核人',
    audit_at DATETIME COMMENT '审核时间',
    created_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    updated_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    created_by BIGINT UNSIGNED,
    updated_by BIGINT UNSIGNED,
    is_deleted BOOLEAN DEFAULT 0,
    remark VARCHAR(500),
    INDEX idx_outbound_no (outbound_no),
    INDEX idx_warehouse_id (warehouse_id),
    INDEX idx_outbound_date (outbound_date),
    INDEX idx_status (status)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='出库单主表';
```

### 3.5 出库单明细表 (inventory_outbound_detail)

```sql
CREATE TABLE inventory_outbound_detail (
    id BIGINT UNSIGNED AUTO_INCREMENT PRIMARY KEY COMMENT '明细ID',
    outbound_id BIGINT UNSIGNED NOT NULL COMMENT '出库单ID',
    material_id BIGINT UNSIGNED NOT NULL COMMENT '物料ID',
    batch_no VARCHAR(50) COMMENT '批次号',
    quantity DECIMAL(18,4) NOT NULL COMMENT '出库数量',
    unit_cost DECIMAL(18,2) DEFAULT 0 COMMENT '单位成本',
    amount DECIMAL(18,2) DEFAULT 0 COMMENT '金额',
    created_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    updated_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    is_deleted BOOLEAN DEFAULT 0,
    remark VARCHAR(500),
    INDEX idx_outbound_id (outbound_id),
    INDEX idx_material_id (material_id),
    INDEX idx_batch_no (batch_no)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='出库单明细表';
```

### 3.6 库存流水表 (inventory_transaction)

```sql
CREATE TABLE inventory_transaction (
    id BIGINT UNSIGNED AUTO_INCREMENT PRIMARY KEY COMMENT '流水ID',
    warehouse_id BIGINT UNSIGNED NOT NULL COMMENT '仓库ID',
    material_id BIGINT UNSIGNED NOT NULL COMMENT '物料ID',
    batch_no VARCHAR(50) COMMENT '批次号',
    transaction_type TINYINT NOT NULL COMMENT '事务类型：1-入库，2-出库',
    transaction_date DATETIME NOT NULL COMMENT '事务时间',
    quantity DECIMAL(18,4) NOT NULL COMMENT '数量（正负）',
    before_qty DECIMAL(18,4) DEFAULT 0 COMMENT '变动前数量',
    after_qty DECIMAL(18,4) DEFAULT 0 COMMENT '变动后数量',
    unit_cost DECIMAL(18,2) DEFAULT 0 COMMENT '单位成本',
    amount DECIMAL(18,2) DEFAULT 0 COMMENT '金额',
    doc_type VARCHAR(50) COMMENT '单据类型',
    doc_no VARCHAR(50) COMMENT '单据号',
    created_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    created_by BIGINT UNSIGNED,
    INDEX idx_warehouse_material (warehouse_id, material_id),
    INDEX idx_transaction_date (transaction_date),
    INDEX idx_doc_no (doc_no)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='库存流水表';
```

---

## 4. 销售管理模块 (Sales)

### 4.1 销售订单主表 (sales_order)

```sql
CREATE TABLE sales_order (
    id BIGINT UNSIGNED AUTO_INCREMENT PRIMARY KEY COMMENT '订单ID',
    order_no VARCHAR(50) NOT NULL UNIQUE COMMENT '订单号',
    customer_id BIGINT UNSIGNED NOT NULL COMMENT '客户ID',
    order_date DATE NOT NULL COMMENT '订单日期',
    delivery_date DATE COMMENT '交货日期',
    total_qty DECIMAL(18,4) DEFAULT 0 COMMENT '总数量',
    total_amount DECIMAL(18,2) DEFAULT 0 COMMENT '订单金额',
    discount_amount DECIMAL(18,2) DEFAULT 0 COMMENT '优惠金额',
    final_amount DECIMAL(18,2) DEFAULT 0 COMMENT '实际金额',
    payment_method TINYINT DEFAULT 1 COMMENT '付款方式：1-现金，2-转账，3-承兑',
    status TINYINT DEFAULT 1 COMMENT '状态：1-草稿，2-待审核，3-已审核，4-生产中，5-已发货，6-已完成，7-已取消',
    audit_by BIGINT UNSIGNED COMMENT '审核人',
    audit_at DATETIME COMMENT '审核时间',
    created_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    updated_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    created_by BIGINT UNSIGNED,
    updated_by BIGINT UNSIGNED,
    is_deleted BOOLEAN DEFAULT 0,
    remark VARCHAR(500),
    INDEX idx_order_no (order_no),
    INDEX idx_customer_id (customer_id),
    INDEX idx_order_date (order_date),
    INDEX idx_status (status)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='销售订单主表';
```

### 4.2 销售订单明细表 (sales_order_detail)

```sql
CREATE TABLE sales_order_detail (
    id BIGINT UNSIGNED AUTO_INCREMENT PRIMARY KEY COMMENT '明细ID',
    order_id BIGINT UNSIGNED NOT NULL COMMENT '订单ID',
    material_id BIGINT UNSIGNED NOT NULL COMMENT '物料ID',
    quantity DECIMAL(18,4) NOT NULL COMMENT '订单数量',
    delivered_qty DECIMAL(18,4) DEFAULT 0 COMMENT '已发货数量',
    unit_price DECIMAL(18,2) NOT NULL COMMENT '单价',
    discount_rate DECIMAL(5,2) DEFAULT 0 COMMENT '折扣率',
    amount DECIMAL(18,2) NOT NULL COMMENT '金额',
    delivery_date DATE COMMENT '交货日期',
    created_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    updated_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    is_deleted BOOLEAN DEFAULT 0,
    remark VARCHAR(500),
    INDEX idx_order_id (order_id),
    INDEX idx_material_id (material_id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='销售订单明细表';
```

### 4.3 发货单主表 (sales_delivery)

```sql
CREATE TABLE sales_delivery (
    id BIGINT UNSIGNED AUTO_INCREMENT PRIMARY KEY COMMENT '发货单ID',
    delivery_no VARCHAR(50) NOT NULL UNIQUE COMMENT '发货单号',
    order_id BIGINT UNSIGNED NOT NULL COMMENT '订单ID',
    customer_id BIGINT UNSIGNED NOT NULL COMMENT '客户ID',
    warehouse_id BIGINT UNSIGNED NOT NULL COMMENT '出库仓库ID',
    delivery_date DATE NOT NULL COMMENT '发货日期',
    total_qty DECIMAL(18,4) DEFAULT 0 COMMENT '总数量',
    total_amount DECIMAL(18,2) DEFAULT 0 COMMENT '总金额',
    logistics_company VARCHAR(100) COMMENT '物流公司',
    tracking_no VARCHAR(100) COMMENT '物流单号',
    status TINYINT DEFAULT 1 COMMENT '状态：1-待发货，2-已发货，3-运输中，4-已签收',
    created_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    updated_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    created_by BIGINT UNSIGNED,
    updated_by BIGINT UNSIGNED,
    is_deleted BOOLEAN DEFAULT 0,
    remark VARCHAR(500),
    INDEX idx_delivery_no (delivery_no),
    INDEX idx_order_id (order_id),
    INDEX idx_customer_id (customer_id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='发货单主表';
```

### 4.4 发货单明细表 (sales_delivery_detail)

```sql
CREATE TABLE sales_delivery_detail (
    id BIGINT UNSIGNED AUTO_INCREMENT PRIMARY KEY COMMENT '明细ID',
    delivery_id BIGINT UNSIGNED NOT NULL COMMENT '发货单ID',
    order_detail_id BIGINT UNSIGNED NOT NULL COMMENT '订单明细ID',
    material_id BIGINT UNSIGNED NOT NULL COMMENT '物料ID',
    batch_no VARCHAR(50) COMMENT '批次号',
    quantity DECIMAL(18,4) NOT NULL COMMENT '发货数量',
    unit_price DECIMAL(18,2) COMMENT '单价',
    amount DECIMAL(18,2) COMMENT '金额',
    created_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    updated_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    is_deleted BOOLEAN DEFAULT 0,
    INDEX idx_delivery_id (delivery_id),
    INDEX idx_order_detail_id (order_detail_id),
    INDEX idx_material_id (material_id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='发货单明细表';
```

---

## 5. 采购管理模块 (Procurement)

### 5.1 采购订单主表 (procurement_order)

```sql
CREATE TABLE procurement_order (
    id BIGINT UNSIGNED AUTO_INCREMENT PRIMARY KEY COMMENT '采购单ID',
    order_no VARCHAR(50) NOT NULL UNIQUE COMMENT '采购单号',
    supplier_id BIGINT UNSIGNED NOT NULL COMMENT '供应商ID',
    order_date DATE NOT NULL COMMENT '订单日期',
    delivery_date DATE COMMENT '期望到货日期',
    total_qty DECIMAL(18,4) DEFAULT 0 COMMENT '总数量',
    total_amount DECIMAL(18,2) DEFAULT 0 COMMENT '订单金额',
    payment_method TINYINT DEFAULT 1 COMMENT '付款方式：1-现金，2-转账，3-承兑',
    status TINYINT DEFAULT 1 COMMENT '状态：1-草稿，2-待审核，3-已审核，4-部分到货，5-全部到货，6-已完成，7-已取消',
    audit_by BIGINT UNSIGNED COMMENT '审核人',
    audit_at DATETIME COMMENT '审核时间',
    created_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    updated_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    created_by BIGINT UNSIGNED,
    updated_by BIGINT UNSIGNED,
    is_deleted BOOLEAN DEFAULT 0,
    remark VARCHAR(500),
    INDEX idx_order_no (order_no),
    INDEX idx_supplier_id (supplier_id),
    INDEX idx_order_date (order_date),
    INDEX idx_status (status)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='采购订单主表';
```

### 5.2 采购订单明细表 (procurement_order_detail)

```sql
CREATE TABLE procurement_order_detail (
    id BIGINT UNSIGNED AUTO_INCREMENT PRIMARY KEY COMMENT '明细ID',
    order_id BIGINT UNSIGNED NOT NULL COMMENT '采购单ID',
    material_id BIGINT UNSIGNED NOT NULL COMMENT '物料ID',
    quantity DECIMAL(18,4) NOT NULL COMMENT '采购数量',
    received_qty DECIMAL(18,4) DEFAULT 0 COMMENT '已到货数量',
    unit_price DECIMAL(18,2) NOT NULL COMMENT '单价',
    amount DECIMAL(18,2) NOT NULL COMMENT '金额',
    delivery_date DATE COMMENT '期望到货日期',
    created_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    updated_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    is_deleted BOOLEAN DEFAULT 0,
    remark VARCHAR(500),
    INDEX idx_order_id (order_id),
    INDEX idx_material_id (material_id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='采购订单明细表';
```

---

## 6. 生产管理模块 (Production)

### 6.1 BOM表 (production_bom)

```sql
CREATE TABLE production_bom (
    id BIGINT UNSIGNED AUTO_INCREMENT PRIMARY KEY COMMENT 'BOM ID',
    bom_code VARCHAR(50) NOT NULL UNIQUE COMMENT 'BOM编码',
    product_id BIGINT UNSIGNED NOT NULL COMMENT '成品物料ID',
    bom_version VARCHAR(20) DEFAULT '1.0' COMMENT 'BOM版本',
    is_active BOOLEAN DEFAULT 1 COMMENT '是否启用',
    effective_date DATE COMMENT '生效日期',
    created_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    updated_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    created_by BIGINT UNSIGNED,
    updated_by BIGINT UNSIGNED,
    is_deleted BOOLEAN DEFAULT 0,
    remark VARCHAR(500),
    INDEX idx_bom_code (bom_code),
    INDEX idx_product_id (product_id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='BOM表';
```

### 6.2 BOM明细表 (production_bom_detail)

```sql
CREATE TABLE production_bom_detail (
    id BIGINT UNSIGNED AUTO_INCREMENT PRIMARY KEY COMMENT '明细ID',
    bom_id BIGINT UNSIGNED NOT NULL COMMENT 'BOM ID',
    material_id BIGINT UNSIGNED NOT NULL COMMENT '物料ID',
    quantity DECIMAL(18,4) NOT NULL COMMENT '用量',
    loss_rate DECIMAL(5,2) DEFAULT 0 COMMENT '损耗率(%)',
    sort_order INT DEFAULT 0 COMMENT '顺序',
    created_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    updated_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    is_deleted BOOLEAN DEFAULT 0,
    INDEX idx_bom_id (bom_id),
    INDEX idx_material_id (material_id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='BOM明细表';
```

### 6.3 生产任务单表 (production_task)

```sql
CREATE TABLE production_task (
    id BIGINT UNSIGNED AUTO_INCREMENT PRIMARY KEY COMMENT '任务单ID',
    task_no VARCHAR(50) NOT NULL UNIQUE COMMENT '任务单号',
    source_doc_no VARCHAR(50) COMMENT '源单号（销售订单号）',
    product_id BIGINT UNSIGNED NOT NULL COMMENT '产品ID',
    bom_id BIGINT UNSIGNED NOT NULL COMMENT 'BOM ID',
    plan_qty DECIMAL(18,4) NOT NULL COMMENT '计划数量',
    completed_qty DECIMAL(18,4) DEFAULT 0 COMMENT '完工数量',
    plan_start_date DATE COMMENT '计划开始日期',
    plan_end_date DATE COMMENT '计划完成日期',
    actual_start_date DATE COMMENT '实际开始日期',
    actual_end_date DATE COMMENT '实际完成日期',
    workshop_id BIGINT UNSIGNED COMMENT '车间ID',
    status TINYINT DEFAULT 1 COMMENT '状态：1-待生产，2-生产中，3-已完工，4-已入库',
    created_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    updated_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    created_by BIGINT UNSIGNED,
    updated_by BIGINT UNSIGNED,
    is_deleted BOOLEAN DEFAULT 0,
    remark VARCHAR(500),
    INDEX idx_task_no (task_no),
    INDEX idx_product_id (product_id),
    INDEX idx_status (status)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='生产任务单表';
```

---

## 7. 财务管理模块 (Finance)

### 7.1 应收账款表 (finance_receivable)

```sql
CREATE TABLE finance_receivable (
    id BIGINT UNSIGNED AUTO_INCREMENT PRIMARY KEY COMMENT '应收ID',
    bill_no VARCHAR(50) NOT NULL UNIQUE COMMENT '单据号',
    customer_id BIGINT UNSIGNED NOT NULL COMMENT '客户ID',
    order_id BIGINT UNSIGNED COMMENT '订单ID',
    bill_date DATE NOT NULL COMMENT '单据日期',
    receivable_amount DECIMAL(18,2) NOT NULL COMMENT '应收金额',
    received_amount DECIMAL(18,2) DEFAULT 0 COMMENT '已收金额',
    balance_amount DECIMAL(18,2) NOT NULL COMMENT '余额',
    due_date DATE COMMENT '到期日期',
    status TINYINT DEFAULT 1 COMMENT '状态：1-未收款，2-部分收款，3-已收款',
    created_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    updated_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    created_by BIGINT UNSIGNED,
    updated_by BIGINT UNSIGNED,
    is_deleted BOOLEAN DEFAULT 0,
    remark VARCHAR(500),
    INDEX idx_bill_no (bill_no),
    INDEX idx_customer_id (customer_id),
    INDEX idx_status (status)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='应收账款表';
```

### 7.2 应付账款表 (finance_payable)

```sql
CREATE TABLE finance_payable (
    id BIGINT UNSIGNED AUTO_INCREMENT PRIMARY KEY COMMENT '应付ID',
    bill_no VARCHAR(50) NOT NULL UNIQUE COMMENT '单据号',
    supplier_id BIGINT UNSIGNED NOT NULL COMMENT '供应商ID',
    order_id BIGINT UNSIGNED COMMENT '订单ID',
    bill_date DATE NOT NULL COMMENT '单据日期',
    payable_amount DECIMAL(18,2) NOT NULL COMMENT '应付金额',
    paid_amount DECIMAL(18,2) DEFAULT 0 COMMENT '已付金额',
    balance_amount DECIMAL(18,2) NOT NULL COMMENT '余额',
    due_date DATE COMMENT '到期日期',
    status TINYINT DEFAULT 1 COMMENT '状态：1-未付款，2-部分付款，3-已付款',
    created_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    updated_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    created_by BIGINT UNSIGNED,
    updated_by BIGINT UNSIGNED,
    is_deleted BOOLEAN DEFAULT 0,
    remark VARCHAR(500),
    INDEX idx_bill_no (bill_no),
    INDEX idx_supplier_id (supplier_id),
    INDEX idx_status (status)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='应付账款表';
```

---

## 8. 人力资源模块 (HRM)

### 8.1 员工档案表 (hrm_employee)

```sql
CREATE TABLE hrm_employee (
    id BIGINT UNSIGNED AUTO_INCREMENT PRIMARY KEY COMMENT '员工ID',
    employee_code VARCHAR(50) NOT NULL UNIQUE COMMENT '员工编号',
    user_id BIGINT UNSIGNED COMMENT '关联用户ID',
    real_name VARCHAR(50) NOT NULL COMMENT '姓名',
    gender TINYINT DEFAULT 0 COMMENT '性别：0-未知，1-男，2-女',
    id_card VARCHAR(20) UNIQUE COMMENT '身份证号',
    phone VARCHAR(20) COMMENT '手机号',
    email VARCHAR(100) COMMENT '邮箱',
    dept_id BIGINT UNSIGNED COMMENT '部门ID',
    position_id BIGINT UNSIGNED COMMENT '岗位ID',
    entry_date DATE COMMENT '入职日期',
    leave_date DATE COMMENT '离职日期',
    status TINYINT DEFAULT 1 COMMENT '状态：1-在职，2-离职，3-试用',
    created_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    updated_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    created_by BIGINT UNSIGNED,
    updated_by BIGINT UNSIGNED,
    is_deleted BOOLEAN DEFAULT 0,
    remark VARCHAR(500),
    INDEX idx_employee_code (employee_code),
    INDEX idx_id_card (id_card),
    INDEX idx_dept_id (dept_id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='员工档案表';
```

### 8.2 考勤记录表 (hrm_attendance)

```sql
CREATE TABLE hrm_attendance (
    id BIGINT UNSIGNED AUTO_INCREMENT PRIMARY KEY COMMENT '考勤ID',
    employee_id BIGINT UNSIGNED NOT NULL COMMENT '员工ID',
    attendance_date DATE NOT NULL COMMENT '考勤日期',
    clock_in_time DATETIME COMMENT '上班打卡时间',
    clock_out_time DATETIME COMMENT '下班打卡时间',
    work_hours DECIMAL(5,2) DEFAULT 0 COMMENT '工作时长（小时）',
    status TINYINT DEFAULT 1 COMMENT '状态：1-正常，2-迟到，3-早退，4-缺卡，5-请假，6-加班',
    created_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    updated_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    UNIQUE KEY uk_employee_date (employee_id, attendance_date),
    INDEX idx_employee_id (employee_id),
    INDEX idx_attendance_date (attendance_date)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='考勤记录表';
```

---

## 9. 物流管理模块 (Logistics)

### 9.1 物流单表 (logistics_shipment)

```sql
CREATE TABLE logistics_shipment (
    id BIGINT UNSIGNED AUTO_INCREMENT PRIMARY KEY COMMENT '物流单ID',
    shipment_no VARCHAR(50) NOT NULL UNIQUE COMMENT '物流单号',
    delivery_id BIGINT UNSIGNED NOT NULL COMMENT '发货单ID',
    logistics_company VARCHAR(100) COMMENT '物流公司',
    tracking_no VARCHAR(100) COMMENT '物流单号',
    shipment_date DATETIME COMMENT '发货时间',
    estimated_arrival DATETIME COMMENT '预计到达时间',
    actual_arrival DATETIME COMMENT '实际到达时间',
    status TINYINT DEFAULT 1 COMMENT '状态：1-待发货，2-运输中，3-已到达，4-已签收',
    created_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    updated_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    created_by BIGINT UNSIGNED,
    updated_by BIGINT UNSIGNED,
    is_deleted BOOLEAN DEFAULT 0,
    remark VARCHAR(500),
    INDEX idx_shipment_no (shipment_no),
    INDEX idx_delivery_id (delivery_id),
    INDEX idx_tracking_no (tracking_no)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='物流单表';
```

---

## 10. 索引设计

### 10.1 索引设计原则

1. **主键索引**：每张表必须有主键，使用自增ID
2. **唯一索引**：编码字段（如订单号、物料编码等）
3. **普通索引**：
   - 外键字段
   - 查询频繁的字段
   - 排序字段
   - 状态字段
4. **复合索引**：多字段联合查询的场景
5. **索引命名**：
   - 主键：PRIMARY KEY
   - 唯一索引：uk_字段名
   - 普通索引：idx_字段名
   - 复合索引：idx_字段1_字段2

### 10.2 性能优化建议

1. **分区表**：对于数据量大的流水表（如库存流水），可按月分区
2. **读写分离**：主从复制，读操作走从库
3. **缓存策略**：热点数据缓存到Redis
4. **归档策略**：历史数据定期归档
5. **慢查询优化**：定期分析慢查询日志

---

**文档结束**
